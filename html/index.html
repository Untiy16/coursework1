<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <title>Tree</title>    
    <script src="../js/binarytree.js"></script>    
    <script src="../js/jquery-1.11.3.min.js"></script>
    <meta charset="utf-8">
    <style>
        input[type=button]{
            margin: 2px;
        }
        p{
            float: left;
        }
    </style>
</head>
<body>
    <input type="button" value="  Додати елемент  " onclick="addElem();"> 
    <input type="text" value="" id="addInput" placeholder="Залиште порожнім для додавання випадкового числа" size="50">    
    <br>
    <input type="button" value="Видалити елемент" onclick="delElem();">
    <input type="text" value="" id="delInput" placeholder="Залиште порожнім для видалення випадкового числа" size="50">
    <br>
    <input type="button" value="  Знайти елемент   " onclick="findElem();">
    <input type="text" value="" id="findInput" placeholder="Введіть елемент для пошуку" size="50">
    <canvas id="canvas"></canvas>

<script>    
    canvas = $('#canvas');
    var array = [];
    binaryTree = new BinaryTree();
    nodes = [];    
    var c = document.getElementById('canvas');
    var cx = c.getContext("2d");
    var canvasSizeInc;   
    nodesCount = 15;     //кількість вузлів
    nodeRadius = 25;    //радіус круга      
    widthOfLastLevel = nodeRadius / 2;
    canvasSizeInc = nodeRadius / 20;
    canvasDynamicSize = 1.5 * canvasSizeInc;  
    arrayRandomizer(nodesCount, -500, 500);
    boobleSort(array);
    makeTree(binaryTree, array, 0, nodesCount);
    binaryTree.preOrder();
    buildTree();   

   
         


    
    function findElem(){
        if($('#findInput').val()!="")
        {
            var findInput = parseInt($('#findInput').val());
            var a = binaryTree.getNode(findInput);
            if (a == null) 
                alert("Такого елемента немає в дереві!");
            else 
                alert("Елемент "+a.value+" знаходиться на " +a.height+" рівні.");
        }
    }
 
   
   function finder(input) {
        for (var i = 0; i < array.length; i++) {
            if(array[i]==input)
            return i;           
        }
        return -1;
    }

    function delElem() {
        if( $('#delInput').val() == "" && nodesCount > 1) {
            array.splice(Math.floor(nodesCount + Math.random() * (1 - (nodesCount))), 1);
            nodesCount--;
        }
        else if (nodesCount <= 1) {alert("Залишився останній елемент!"); }
        else {
            var delInput = parseInt($('#delInput').val());
            var inside = -1;    
            inside = finder(delInput);            
            if (inside != -1 && inside != undefined && !isNaN(delInput)) {                
                nodesCount -= 1;
                array.splice(inside, 1);
                rebuildTree();
            }
            else if (isNaN(delInput)) 
                alert("Тільки числа!"); 
            else
                alert("Такого елемента немає!"); 
        }
        rebuildTree();  
  }

   function addElem() {
        if( $('#addInput').val() == "")
        {
            array.push(Math.floor(300 + Math.random() * (1 - (300))));
            nodesCount++;            
        }
        else
        {
            var addInput = parseInt($('#addInput').val());
            console.log(addInput);
            var inside = -1;    
            inside = finder(addInput); 
            if (inside == -1 && inside != undefined && !isNaN(addInput)) { 
                array.push($('#addInput').val());
                nodesCount++;
            }
            else if (isNaN(addInput)) 
                 alert("Тільки числа!"); 
            else
                alert("Такой елемент вже існує!"); 

        }        
        rebuildTree();
    }

    function rebuildTree(){
        delete binaryTree;
        nodes = [];
        binaryTree = new BinaryTree();
        boobleSort(array);
        makeTree(binaryTree, array, 0, nodesCount);
        binaryTree.preOrder();
        buildTree();   
    }
</script>
</body>
</html>