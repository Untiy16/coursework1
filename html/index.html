<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <title>Tree</title>    
    <script src="../js/binarytree.js"></script>    
    <script src="../js/jquery-1.11.3.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <input type="button" value="Добавить елемент" onclick="addElem();"> 
    <input type="text" value="" id="addInput" placeholder="Залиште пустим для додавання випадкового числа">
    <br><br>
    <input type="button" value="Удалить елемент" onclick="delElem();">
    <input type="text" value="" id="delInput">
    <input type="button" value="test" onclick="test();"> 
    <canvas id="canvas"></canvas>

<script>  
    function addElem() {
        if( $('#addInput').val() == "" )
        {
            array.push(Math.floor(300 + Math.random() * (1 - (300))));
            nodesCount++;
        }
        else
        {
            var addInput = parseInt($('#addInput').val());
            console.log(addInput);
            var inside = -1;    
            inside = finder(addInput); 
            if (inside == -1 && inside != undefined && !isNaN(addInput)) { 
                array.push($('#addInput').val());
                nodesCount++;
            }
            else if (isNaN(addInput)) 
                 alert("Тільки числа!"); 
            else
                alert("Такой елемент вже існує!"); 

        }
        
        rebuildTree();
    }

    function rebuildTree(){
        delete binary_tree;
        nodes = [];
        binary_tree = new BinaryTree();
        makeTree(binary_tree, array, 0, nodesCount);
        binary_tree.preOrder();
        buildTree();   
    }

   
    canvas = $('#canvas');

    var array = [];
    binary_tree = new BinaryTree();
    nodes = [];    
    var c = document.getElementById('canvas');
    var cx = c.getContext("2d");

    var factorOfZoom;
    drawType ='circle' ;

    nodesCount = 4;//parseInt(el_numberOfNodes.val());
    radius = 25;//parseInt(el_radius.val());
    widthOfNode = 60;//parseInt(el_widthOfNode.val());
    heightOfNode = 60;//parseInt(el_heightOfNode.val());
    widthOfLastLevel = radius / 2 ;

    factorOfZoom = radius / 20;
    

    factorOfExtension = 1.5 * factorOfZoom;

    // -----------

    arrayRandomizer(nodesCount, -500, 500);
   // boobleSort(array);
    makeTree(binary_tree, array, 0, nodesCount);

   /* for (g = 0; g < nodesCount; g++)
        binary_tree.addNode(array[g], array[g]);*/

   binary_tree.preOrder();

    buildTree();
   

   /* array.push(10);
    nodesCount++;
   delete binary_tree;

        nodes = [];

        binary_tree = new BinaryTree();
        makeTree(binary_tree, array, 0, nodesCount);

        binary_tree.preOrder();

        setTimeout('buildTree()', 4000);*/
         function Sort () {
        for (var i = 0; i < array.length - 1; i++) {
            for (var j = i; j < array.length; j++) {
                if (array[i] > array[j]) {
                    var tmp = array[i];
                    array[i] = array[j];
                    array[j] = tmp;
                    rebuildTree();
                   
                }
            }
        }   
    }


    
    function test(){
        var a= binary_tree.getNode(101);
        alert(a.value);

    }
el_numberOfNodes = nodesCount;

  /*  canvas.click(function (e) {
    var node = getNodeByCoords(e.pageX, e.pageY, radius);
    if (nodesCount != 1) {
        nodesCount -= 1;
        
        
        rebuildTree();
    }
    //sendPopUpMessage("Узел " + node.value + " удален! Дерево перестроено!")
});*/
   
   function finder(input) {
        for (var i = 0; i < array.length; i++) {
            if(array[i]==input)
            return i;           
        }
        return -1;
    }

    function delElem() {
        if( $('#delInput').val() == "" && nodesCount > 1) {
            array.splice(Math.floor(nodesCount + Math.random() * (1 - (nodesCount))), 1);
            nodesCount--;
        }
        else if (nodesCount <= 1) {alert("Залишився останній елемент!"); }
        else {
            var delInput = parseInt($('#delInput').val());
            var inside = -1;    
            inside = finder(delInput);            
            if (inside != -1 && inside != undefined && !isNaN(delInput)) {                
                nodesCount -= 1;
                array.splice(inside, 1);
                rebuildTree();
            }
            else if (isNaN(delInput)) 
                alert("Тільки числа!"); 
            else
                alert("Такого елемента немає!"); 
        }
        rebuildTree();  

  }





</script>

   


</body>
</html>